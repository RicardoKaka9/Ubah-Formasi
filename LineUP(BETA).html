<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Formasi(Sasono League)</title>
<style>
  body { font-family: Arial, sans-serif; background:#126412; color:white; text-align:center; margin:0; padding:0;}
  h1 { margin-top:20px;}
  .controls { margin:20px;}
  .field {
    position: relative; width:700px; height:900px; background:#228B22;
    margin:20px auto; border:4px solid white; border-radius:10px;
  }
  .position {
    position:absolute; width:100px; height:40px;
    background: rgba(255,255,255,0.25); border:1px solid #fff;
    border-radius:8px; cursor:pointer;
    display:flex; align-items:center; justify-content:center; font-weight:bold;
    transition:0.3s; user-select:none;
  }
  .invalid { background: rgba(255,0,0,0.4) !important;}
  .valid { background: rgba(0,255,0,0.4) !important;}
  .subs { position:absolute; right:-180px; top:100px; width:160px; display:flex; flex-direction:column; gap:10px;}
  select, button { margin:5px; padding:6px 10px; border-radius:5px; border:none; cursor:pointer;}
  #playerSelect { display:none;}
</style>
</head>
<body>

<h1>âš½Sasono League</h1>

<div class="controls">
  <label>Pilih Club:</label>
  <select id="clubSelect">
    <option value="">-- Pilih Club --</option>
    <option value="Leverkusen">Leverkusen</option>
    <option value="Chelsea">Chelsea</option>
    <option value="Inter Milan">Inter Milan</option>
    <option value="AC Milan">AC Milan</option>
    <option value="Barcelona">Barcelona</option>
  </select>

  <label>Formasi:</label>
  <select id="formationSelect">
    <option value="4-3-3">4-3-3</option>
    <option value="4-2-3-1">4-2-3-1</option>
    <option value="3-5-2">3-5-2</option>
    <option value="4-2-4">4-2-4</option>
    <option value="3-4-2-1">3-4-2-1</option>
    <option value="3-1-4-2">3-1-4-2</option>
    <option value="3-6-1">3-6-1</option>
    <option value="2-3-5">2-3-5</option>
    <option value="3-4-3">3-4-3</option>
  </select>

  <button id="saveBtn">ðŸ’¾ Simpan Lineup</button>
  <label>Pilih Kapten:</label>
  <select id="captainSelect"></select>
</div>

<div class="field" id="field"></div>
<select id="playerSelect"></select>

<script>
// =================== BAGIAN 2: DATABASE PEMAIN ===================
const clubs = {
  "Leverkusen":[
    {name:"Emi Martinez", pos:["GK"]},{name:"Chevalier", pos:["GK"]},{name:"L. Hradecky", pos:["GK"]},{name:"M. Kovar", pos:["GK"]},{name:"N. Lomb", pos:["GK"]},
    {name:"Dean Huijsen", pos:["CB"]},{name:"Murillo", pos:["CB"]},{name:"Antonio RUDIger", pos:["CB"]},{name:"J. Belocian", pos:["CB"]},
    {name:"N. Mukiele", pos:["RB"]},{name:"Arthur", pos:["CM"]},{name:"S. Fofana", pos:["CM"]},{name:"O. Raterink", pos:["CM"]},
    {name:"Granit Xhaka", pos:["CM","DM"]},{name:"R. Andrich", pos:["CM"]},{name:"L. Modric", pos:["CM","AM"]},{name:"Rodrigo Mora", pos:["AM","CM"]},{name:"Nico Paz", pos:["AM","CM"]},
    {name:"A. Aorir", pos:["CM"]},{name:"F. Onyeka", pos:["DM"]},{name:"Ole Romeny", pos:["ST","RM","AM"]},{name:"Grimaldo", pos:["LB","LM"]},
    {name:"N. Telaa", pos:["RB"]},{name:"Erling Haaland", pos:["ST"]},{name:"Julian Alvarez", pos:["ST","RW","AM"]},{name:"P. Schick", pos:["ST"]},
    {name:"A. Stepanov", pos:["CM"]},{name:"M. Terrier", pos:["RW","LW"]},{name:"A. Adli", pos:["LW","RW"]}
  ],
  "Chelsea":[
    {name:"Mamardashvili", pos:["GK"]},{name:"Flib JÃ¸rgensen", pos:["GK"]},{name:"Marcus Bettineli", pos:["GK"]},
    {name:"Reece James", pos:["RB","RM","DM","CM"]},{name:"Malo Gusto", pos:["RB","RM"]},{name:"William Saliba", pos:["CB"]},
    {name:"Alphonso Davies", pos:["LB","LM"]},{name:"Renato Veiga", pos:["CM"]},{name:"Marc Cucurella", pos:["LB","LM"]},{name:"Declan Rice", pos:["CM","DM"]},
    {name:"Enzo Fernandez", pos:["CM","DM","AM"]},{name:"Caicedo", pos:["CM","DM"]},{name:"Lavia", pos:["CM","DM"]},{name:"Casadae", pos:["CM"]},
    {name:"A. Matos", pos:["CM"]},{name:"Nkunku", pos:["AM","ST"]},{name:"Kai Havertz", pos:["AM","ST","RW","LB"]},{name:"Cole Palmer", pos:["AM","RW","RM","ST"]},
    {name:"Noni Madueke", pos:["RW","RM","LW"]},{name:"Kvicha Kvaratsheila", pos:["LW","LM","ST","RW"]},{name:"Raheem Sterling", pos:["RW","LW","RM"]},
    {name:"H. Vale", pos:["CM"]},{name:"Joao Felix", pos:["AM","ST","LW","RW"]},{name:"Victor Osimhen", pos:["ST"]}
  ],
  "Inter Milan":[
    {name:"Sommer", pos:["GK"]},{name:"Josep Martinez", pos:["GK"]},{name:"Radu", pos:["GK"]},{name:"Di gennaro", pos:["GK"]},
    {name:"De vrij", pos:["CB"]},{name:"Acerbi", pos:["CB"]},{name:"Bastoni", pos:["CB"]},{name:"Bisseck", pos:["CB"]},
    {name:"Darmian", pos:["RB","LB"]},{name:"Gerard Martin", pos:["LB","LM"]},{name:"Palacios", pos:["CM"]},{name:"Kyle Walker", pos:["RB","RM"]},
    {name:"Ã‡alhanoÄŸlu", pos:["DM","CM"]},{name:"Mkhitaryan", pos:["AM"]},{name:"Barella", pos:["CM"]},{name:"De jong", pos:["CM","DM"]},
    {name:"Asllani", pos:["AM"]},{name:"Zielinski", pos:["CM"]},{name:"Carlos Augusto", pos:["LB"]},{name:"Buchanan", pos:["LB","CB"]},
    {name:"Dumfries", pos:["RB"]},{name:"Walker", pos:["RB"]},{name:"Salcedo", pos:["ST"]},{name:"J. Correa", pos:["ST"]},
    {name:"M. Taremi", pos:["ST"]},{name:"VÃ­ctor Gyokeres", pos:["ST"]},{name:"Alexander Isak", pos:["ST"]}
  ],
  "AC Milan":[
    {name:"Mike Maignan", pos:["GK"]},{name:"M. Sportiello", pos:["GK"]},{name:"L. Nova", pos:["GK"]},{name:"L. Torriani", pos:["GK"]},
    {name:"Dimarco", pos:["LB","LM"]},{name:"Fikayo Tomori", pos:["CB"]},{name:"Joao Cancelo", pos:["RB","LB","CB","LM","RM"]},{name:"D. Calabria", pos:["RB"]},
    {name:"M. Thiaw", pos:["CB"]},{name:"G. Gabbia", pos:["CB"]},{name:"J. Acheampong", pos:["RB","CB"]},{name:"A. Florenzi", pos:["RB"]},
    {name:"Emerson Royal", pos:["RB"]},{name:"F. Ballo-toure", pos:["LB"]},{name:"Alex Jimenez", pos:["CM"]},{name:"D. Bartesaghi", pos:["CM"]},
    {name:"Alejandro Balde", pos:["LB","LM"]},{name:"Tijjani REIJDNERS", pos:["CM","AM","DM"]},{name:"M. Liberali", pos:["CM"]},
    {name:"K. zeroli", pos:["CM"]},{name:"F. Terracciano", pos:["GK"]},{name:"Y. Musah", pos:["CM"]},{name:"Y. Fofana", pos:["CM"]},
    {name:"Bennacer", pos:["CM","DM"]},{name:"Loftus-Cheek", pos:["CM","AM"]},{name:"Chukwueze", pos:["RW","LW","RM"]},{name:"Pedro Neto", pos:["RW","LW","LM","RM"]},
    {name:"Morata", pos:["ST"]},{name:"L. Jovic", pos:["ST"]},{name:"Zirkzee", pos:["ST"]},{name:"Abraham", pos:["ST"]},
    {name:"N. Okafor", pos:["ST"]},{name:"Desire Doue", pos:["RW","RM","LM","LW","CM","AM"]},{name:"C. Traore", pos:["RW"]},{name:"Marc Guiu", pos:["ST","RW","LW"]},
    {name:"Cristian Pulisic", pos:["RW","LW","LM","AM","RM"]}
  ],
  "Barcelona":[
    {name:"Diogo Costa", pos:["GK"]},{name:"Inaki Pena", pos:["GK"]},{name:"Astargala", pos:["GK"]},
    {name:"Kounde", pos:["CB","RB"]},{name:"Araujo", pos:["CB"]},{name:"Andreas Christensen", pos:["CB"]},{name:"Inigo Martinez", pos:["CB"]},
    {name:"Eric Garcia", pos:["CB","LB","DM"]},{name:"Sergo dominiguez", pos:["CB"]},{name:"Theo Hernandez", pos:["LB","LM"]},{name:"Pedri", pos:["CM"]},
    {name:"Dewsburi-Hall", pos:["CM","DM","AM"]},{name:"Fermin Lopez", pos:["CM","AM","LW"]},{name:"Pablo Gavi", pos:["CM"]},{name:"Marc Casado", pos:["CM","DM"]},{name:"Marc Bernal", pos:["CM","DM"]},
    {name:"Ansu Fati", pos:["LW","RW"]},{name:"Dani olmo", pos:["AM","CM","RW","LW"]},{name:"Lamine Yamal", pos:["LW","RW","RM"]},{name:"Raphinha", pos:["RW","LW","LM","ST"]},
    {name:"Nico William", pos:["LW"]},{name:"Ousmane Dembele", pos:["RW","LW","ST","RM"]},{name:"Ferran Torres", pos:["RW","LW","LM","ST"]},{name:"Robert Lewandowski", pos:["ST"]},
    {name:"Victor Roque", pos:["ST"]},{name:"Lautaro Martinez", pos:["ST"]}
  ]
};

// =================== BAGIAN 1: POSISI FIELD ===================
const field = document.getElementById('field');
const clubSelect = document.getElementById('clubSelect');
const formationSelect = document.getElementById('formationSelect');
const saveBtn = document.getElementById('saveBtn');
const captainSelect = document.getElementById('captainSelect');
const playerSelect = document.getElementById('playerSelect');

const defaultPositions = [
  {id:'GK', label:'GK', top:800, left:300},
  {id:'CB1', label:'CB', top:650, left:200},
  {id:'CB2', label:'CB', top:650, left:400},
  {id:'LB', label:'LB', top:650, left:100},
  {id:'RB', label:'RB', top:650, left:500},
  {id:'CM1', label:'CM', top:500, left:200},
  {id:'CM2', label:'CM', top:500, left:400},
  {id:'CM3', label:'CM', top:500, left:300},
  {id:'LW', label:'LW', top:350, left:100},
  {id:'RW', label:'RW', top:350, left:500},
  {id:'ST', label:'ST', top:200, left:300}
];

const formations = {
  "4-3-3":[
    {id:'GK', label:'GK', top:800, left:300},
    {id:'CB1', label:'CB', top:650, left:200},
    {id:'CB2', label:'CB', top:650, left:400},
    {id:'LB', label:'LB', top:650, left:100},
    {id:'RB', label:'RB', top:650, left:500},
    {id:'CM1', label:'CM', top:500, left:200},
    {id:'CM2', label:'CM', top:500, left:400},
    {id:'CM3', label:'CM', top:500, left:300},
    {id:'LW', label:'LW', top:350, left:100},
    {id:'RW', label:'RW', top:350, left:500},
    {id:'ST', label:'ST', top:200, left:300}
  ],
  "4-2-3-1":[
    {id:'GK', label:'GK', top:800, left:300},
    {id:'CB1', label:'CB', top:650, left:200},
    {id:'CB2', label:'CB', top:650, left:400},
    {id:'LB', label:'LB', top:650, left:100},
    {id:'RB', label:'RB', top:650, left:500},
    {id:'DM1', label:'DM', top:500, left:200},
    {id:'DM2', label:'DM', top:500, left:400},
    {id:'AM1', label:'AM', top:350, left:150},
    {id:'AM2', label:'AM', top:350, left:300},
    {id:'AM3', label:'AM', top:350, left:450},
    {id:'ST', label:'ST', top:200, left:300}
  ],
  "3-5-2":[
    {id:'GK', label:'GK', top:800, left:300},
    {id:'CB1', label:'CB', top:650, left:150},
    {id:'CB2', label:'CB', top:650, left:300},
    {id:'CB3', label:'CB', top:650, left:450},
    {id:'LM', label:'LM', top:500, left:100},
    {id:'CM1', label:'CM', top:500, left:200},
    {id:'CM2', label:'CM', top:500, left:300},
    {id:'CM3', label:'CM', top:500, left:400},
    {id:'RM', label:'RM', top:500, left:500},
    {id:'ST1', label:'ST', top:350, left:200},
    {id:'ST2', label:'ST', top:350, left:400}
  ],
"4-2-4":[
  {id:'GK', label:'GK', top:800, left:300},
  {id:'LB', label:'LB', top:650, left:100},
  {id:'CB1', label:'CB', top:650, left:200},
  {id:'CB2', label:'CB', top:650, left:400},
  {id:'RB', label:'RB', top:650, left:500},
  {id:'CM1', label:'CM', top:500, left:250},
  {id:'CM2', label:'CM', top:500, left:350},
  {id:'LW', label:'LW', top:350, left:100},
  {id:'ST1', label:'ST', top:230, left:250},
  {id:'ST2', label:'ST', top:230, left:350},
  {id:'RW', label:'RW', top:350, left:500}
],
"3-4-2-1":[
  {id:'GK', label:'GK', top:800, left:300},
  {id:'CB1', label:'CB', top:650, left:150},
  {id:'CB2', label:'CB', top:650, left:300},
  {id:'CB3', label:'CB', top:650, left:450},
  {id:'LM', label:'LM', top:500, left:100},
  {id:'CM1', label:'CM', top:500, left:200},
  {id:'CM2', label:'CM', top:500, left:400},
  {id:'RM', label:'RM', top:500, left:500},
  {id:'AM1', label:'AM', top:350, left:250},
  {id:'AM2', label:'AM', top:350, left:350},
  {id:'ST', label:'ST', top:200, left:300}
],
"3-1-4-2": [
  { id: 'GK', label: 'GK', top: 800, left: 300 },
  { id: 'CB1', label: 'CB', top: 650, left: 150 },
  { id: 'CB2', label: 'CB', top: 650, left: 300 },
  { id: 'CB3', label: 'CB', top: 650, left: 450 },
  { id: 'CDM', label: 'CDM', top: 575, left: 300 },
  { id: 'LM', label: 'LM', top: 500, left: 100 },
  { id: 'LCM', label: 'CM', top: 500, left: 220 },
  { id: 'RCM', label: 'CM', top: 500, left: 380 },
  { id: 'RM', label: 'RM', top: 500, left: 500 },
  { id: 'ST1', label: 'ST', top: 350, left: 250 },
  { id: 'ST2', label: 'ST', top: 350, left: 350 }
],
"3-6-1": [
  { id: 'GK', label: 'GK', top: 800, left: 300 },
  { id: 'CB1', label: 'CB', top: 650, left: 150 },
  { id: 'CB2', label: 'CB', top: 650, left: 300 },
  { id: 'CB3', label: 'CB', top: 650, left: 450 },
  { id: 'LCM', label: 'CM', top: 550, left: 200 },
  { id: 'CM', label: 'CM', top: 550, left: 300 },
  { id: 'RCM', label: 'CM', top: 550, left: 400 },
  { id: 'LAM', label: 'AM', top: 450, left: 250 },
  { id: 'RAM', label: 'AM', top: 450, left: 350 },
  { id: 'ST', label: 'ST', top: 300, left: 300 }
],
"2-3-5": [
  { id: 'GK', label: 'GK', top: 800, left: 300 },
  { id: 'CB1', label: 'CB', top: 650, left: 200 },
  { id: 'CB2', label: 'CB', top: 650, left: 400 },
  { id: 'LM', label: 'LM', top: 525, left: 150 },
  { id: 'CM', label: 'CM', top: 525, left: 300 },
  { id: 'RM', label: 'RM', top: 525, left: 450 },
  { id: 'LW', label: 'LW', top: 400, left: 100 },
  { id: 'LAM', label: 'AM', top: 400, left: 225 },
  { id: 'ST', label: 'ST', top: 340, left: 300 },
  { id: 'RAM', label: 'AM', top: 400, left: 375 },
  { id: 'RW', label: 'RW', top: 400, left: 500 }
],
"3-4-3": [
  { id: 'GK', label: 'GK', top: 800, left: 300 },
  { id: 'CB1', label: 'CB', top: 650, left: 150 },
  { id: 'CB2', label: 'CB', top: 650, left: 300 },
  { id: 'CB3', label: 'CB', top: 650, left: 450 },
  { id: 'LM', label: 'LM', top: 500, left: 100 },
  { id: 'CM1', label: 'CM', top: 500, left: 250 },
  { id: 'CM2', label: 'CM', top: 500, left: 350 },
  { id: 'RM', label: 'RM', top: 500, left: 500 },
  { id: 'LW', label: 'LW', top: 350, left: 150 },
  { id: 'ST', label: 'ST', top: 300, left: 300 },
  { id: 'RW', label: 'RW', top: 350, left: 450 }
]
};

formationSelect.addEventListener('change', ()=>{
  const f = formationSelect.value;
  if(!f) return;

  // Hapus posisi lama
  document.querySelectorAll('.position').forEach(p=>p.remove());

  // Buat posisi baru
  formations[f].forEach(p=>createPosition(p.id,p.label,p.top,p.left));
});

function createPosition(id, label, top, left){
  const div=document.createElement('div');
  div.className='position'; div.id=id; div.style.top=top+'px'; div.style.left=left+'px';
  div.innerText=label; div.dataset.pos=label;
  field.appendChild(div);
}
defaultPositions.forEach(p=>createPosition(p.id,p.label,p.top,p.left));

// =================== BAGIAN 3: LOGIKA ===================
function populatePlayerSelect(clubName) {
  playerSelect.innerHTML = '';
  clubs[clubName].forEach(p=>{
    const opt = document.createElement('option'); opt.value=p.name; opt.innerText=p.name;
    playerSelect.appendChild(opt);
  });
  captainSelect.innerHTML='<option value="">-- Pilih Kapten --</option>';
  clubs[clubName].forEach(p=>{
    const opt=document.createElement('option'); opt.value=p.name; opt.innerText=p.name;
    captainSelect.appendChild(opt);
  });
}

field.addEventListener('click', e => {
  // Hanya kalau yang diklik adalah slot posisi
  if (!e.target.classList.contains('position')) return;

  const slot = e.target;

  // Tampilkan dropdown pemain saat posisi diklik
  playerSelect.style.display = 'inline';
  playerSelect.value = ""; // reset pilihan sebelumnya

  playerSelect.onchange = function() {
    const playerName = playerSelect.value;
    if(!playerName) return;

    slot.innerText = playerName;

    const clubName = clubSelect.value;
    const player = clubs[clubName].find(p => p.name === playerName);

    // Warna hijau kalau posisi valid, merah kalau tidak
    if (player && player.pos.includes(slot.dataset.pos)) {
      slot.classList.remove('invalid');
      slot.classList.add('valid');
    } else {
      slot.classList.remove('valid');
      slot.classList.add('invalid');
    }
  }
});

saveBtn.onclick = ()=>{
  const lineup={};
  defaultPositions.forEach(p=>{
    const el=document.getElementById(p.id); lineup[p.id]=el.innerText||"";
  });
  const subs=[]; document.querySelectorAll('.sub').forEach(s=>subs.push(s.innerText));
  const captain=captainSelect.value;
  const data={lineup, subs, captain};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
  const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='lineup.json'; a.click();
  URL.revokeObjectURL(url);
};

clubSelect.addEventListener('change', ()=>{
  const clubName=clubSelect.value; if(!clubName) return; populatePlayerSelect(clubName);
  defaultPositions.forEach(p=>{ const el=document.getElementById(p.id); el.innerText=p.label; el.classList.remove('valid','invalid');});
});
</script>
</body>
</html>